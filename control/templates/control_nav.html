<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
	  py:strip="True">
	  
<div name="tabs" class="tabs">
<div class="navtabs">
<ul xmlns:py="http://genshi.edgewall.org/">
<!--  <h1>STECKE IN CONTROL_NAV.HTML</h1> -->
<!--FUNKTION UM DEN CODE wiederzuverwenden-->

<py:def function="recursivePrint(nav,lvl=0,parent='')">
	<py:for each="comp in nav">

		<py:if test="comp.parent == parent">

			<li style="background-color: rgb(${255-5*lvl},${255-5*lvl},${255-5*lvl}); background-image: url('${'' if comp.isGroup else (trac_chrome_path + '/cl/images/grau.png' if comp.status != '' else trac_chrome_path + '/cl/images/gruen.png')}')" class="firstNode ${'active active_attr' if comp.title == control_active_comp.title else 'inactive'}">
				<py:choose test="comp.isGroup!=True">
				<py:when test="True">
					<a style="padding-left:${lvl*10+10}px" class="title" href='$comp.href'>$comp.title</a>
				</py:when>
				<py:otherwise>
					<a style="padding-left:${lvl*10+10}px" class="grpTitle" href='$comp.href'>$comp.title</a>
				</py:otherwise>
				</py:choose>
			
		
				<ul>
					<py:if test="comp.title == control_active_comp.title and len(control_attributes)>0">
					<li style="padding-left:${lvl*10+10}px;" class='attribute'>Â»
						<py:for each="attr in control_attributes">
						<a href='$comp.href?$attr.Href'> $attr.Name </a> 
							<py:if test="attr != control_attributes[-1]">|</py:if>
						
						</py:for>
						</li>
					</py:if>

					${recursivePrint(nav,lvl+1,comp.title)}
				</ul> 
			</li>

		</py:if>
	</py:for>
</py:def>


<!-- Recursive Print to indent childs -->
${recursivePrint(control_nav_comps)}



</ul>
</div>
<py:if test="(hostAdmin or controlAdmin or envAdmin)==True">
<div name="admintabs" id="settings" class="navtabs">
	<p class="title">Settings</p>
	<ul>
		<py:if test="hostAdmin==True">
		<li><a href="$control_admin_page?operation=edit&amp;attr=host">HostAdmin</a></li>
		</py:if>
		<py:if test="compAdmin==True">
		<li><a href="$control_admin_page?operation=edit&amp;attr=comp">CompAdmin</a></li>
		</py:if>
		<py:if test="envAdmin==True">
		<li><a href="$base_url/envAdmin">EnvAdmin</a></li>
		</py:if>
	</ul>
</div>
</py:if>


<py:if test="exclusiveAccessEnabled==True">
<div name="privilegeBox" id="privilegeBox" class="navtabs">
	<p class="serverStatusLabel">Username:</p><p class="privilegeLevelValue">$authname</p>
	<p class="serverStatusLabel">ServerStatus:</p>
	<py:choose test="serverStatus">
		<py:when test="1"><p class="serverStatusValue serverStatusBooked">Available</p></py:when>
		<py:when test="2"><p class="serverStatusValue serverStatusBooked">Booked ( - $bookingEnds)</p></py:when>
		<py:when test="-1"><p class="serverStatusValue serverStatusUnavailable">Unavailable ( - $bookingEnds)</p></py:when>
	</py:choose>
	<a class="serverStatusValue serverStatusReservation" href="$base_url/book">Reservation</a>
	<p class="privilegeLevelLabel">PrivilegeLevel:</p><p class="privilegeLevelValue">$privilegeLevelString</p>
	
</div>
</py:if>

</div>

</html>
